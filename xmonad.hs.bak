--Config de XMonad
--Par Viahduc

import XMonad
import XMonad.Util.EZConfig
import XMonad.Util.Ungrab
import XMonad.Layout.ThreeColumns       --Layout 3 colonnes
import XMonad.Layout.Magnifier          --Zoom
import XMonad.Hooks.EwmhDesktops        --Pour plus de compatibilité
import XMonad.Hooks.DynamicLog          --Pour communiquer avec XMobar
import XMonad.Hooks.StatusBar           --XMobar
import XMonad.Hooks.StatusBar.PP        --XMobar

--Définir des valeurs

myTerminal           = "alacritty"
myBorderWidth        = 2
myWorkspaces         = ["TRML","FILE","WEB","MUSIC","GAME","TEXT","MAIL","VBOX","NAN"]
myNormalBorderColor  = "#a8a8a8"
myFocusedBorderColor = "#6272a4"

--Fonction Main

main :: IO ()
main = xmonad . ewmhFullscreen . ewmh . xmobarProp $ myConfig

myConfig = def
    { modMask    = mod4Mask  --ça permet de faire en sorte que la touche maitre soit Super (Windows)
    , layoutHook = myLayout
    , terminal   = myTerminal
    }
   `additionalKeysP`
    [ ("M-r",     spawn "dmenu_run"       ) --mon lanceur d'applications
    , ("M-S-b",   spawn "firefox"         ) --mon navigateur internet
    , ("M-i",     spawn "setxkbmap us"    ) --clavier américain
    , ("M-o",     spawn "setxkbmap ca"    ) --clavier canadien
    , ("M-u",     sendMessage ToggleOff   ) --éteindre le zoom
    , ("M-S-u",   sendMessage ToggleOn    ) --démarrer le zoom
    ]

myLayout = magnifier (tiled ||| Mirror tiled ||| Full) ||| threeCol
    where
      threeCol = magnifiercz' 1.3 $ ThreeColMid nmaster delta ratio --Défini le "layout threeCol"
      tiled    = Tall nmaster delta ratio
      nmaster  = 1               --Nombre par défaut de fênetre dans l'écran maître
      ratio    = 1/2             --Proportion par défaut utilisé par l'écran maitre
      delta    = 3/100           --Pourcentage qui change quand tu "resize" des fenêtres

xmobarProp config =
    withEasySB (statusBarProp "xmobar" (pure xmobarPP)) toggleStrutsKey config
